<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>...</title>

    <link rel="stylesheet" href="https://unpkg.com/element-ui@2.15.10/lib/theme-chalk/index.css">
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="flow.css">
    <link rel="stylesheet" href="inbox.css?v=4">
    <link rel="stylesheet" href="webchat.css?v=18">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <style>:root{--primaryColor:#36d6b5;--secondaryColor:#ffffff;--fontFamily:Helvetica, Arial, sans-serif;--fontWeight:bold;--headerTextSize:18px;--headerTextColor:#ffffff;--headerBackgroundLayers:#36d6b5;--headerHeight:60px;--headerTextAlign:center;--cornerStyle:20px;--headerPaddingLeft:20px;--chatAreaBackgroundColor:#f8f9fa;--chatAreaGradient:none;--chatAreaBackgroundImage:none;--chatAreaBackgroundPosition:center;--chatAreaBackgroundRepeat:no-repeat;--chatAreaBackgroundSize:cover;--messageTextSize:14px;--userMessageCornerStyle:20px;--botMessageCornerStyle:20px;--botMessageTextColor:#212529;--botMessageBg:#eeeeee;--userMessageTextColor:#ffffff;--userMessageBg:#36d6b5;--chatInputBackground:#ffffff;--chatInputTextFieldBg:#f1f1f1;--chatInputTextFieldTextColor:#333333;--chatInputBorderRadius:18px;--iconsDisplay:inline-block;--iconsColor:#000000;--iconsColorSend:#000000;--buttonTextSize:14px;--buttonFontWeight:bold;--buttonPadding:10px 20px;--chatInputHeight:80px;--avatarSize:50px;--avatarBorderColor:#36d6b5;--avatarBorderThickness:3px;--avatarImageURL:url("https://via.placeholder.com/50");--avatarDisplay:none;--avatarShape:50%;--otherMessagePaddingLeft:0px;--userMessageBorderColor:#ffffff;--userMessageBorderThickness:3px;--botMessageBorderColor:#ffffff;--botMessageBorderThickness:3px;}.chat-input:before{content:"Developed by Chatbot Builder AI";position:absolute;bottom:1px;color:#000000;font-size:12px;font-family:sans-serif;font-weight:normal;padding:1px 5px;left:50%;transform:translateX(-50%);white-space:nowrap;}.d-flex.align-items-center.w-100{padding-bottom:2vh;}pre{color:var(--botMessageTextColor);line-height:1.5;padding:10px;font-weight:var(--buttonFontWeight);font-size:var(--messageTextSize);font-family:var(--fontFamily);}.chat-header{font-size:var(--headerTextSize);color:var(--headerTextColor);background:var(--headerBackgroundLayers);height:var(--headerHeight);text-align:var(--headerTextAlign);display:flex;align-items:center;justify-content:var(--headerTextAlign);font-family:var(--fontFamily);border-top-left-radius:var(--cornerStyle);border-top-right-radius:var(--cornerStyle);padding-left:var(--headerPaddingLeft);}.chat-input path{fill:var(--iconsColor)!important;}.chat-area{height:calc(92% - var(--headerHeight));position:absolute;top:var(--headerHeight);flex:1;padding:0;overflow-y:auto;line-height:1.5;font-family:var(--fontFamily);background-color:var(--chatAreaBackgroundColor);background-image:var(--chatAreaGradient),var(--chatAreaBackgroundImage);background-position:var(--chatAreaBackgroundPosition);background-repeat:var(--chatAreaBackgroundRepeat);background-size:var(--chatAreaBackgroundSize);}.other-message{position:relative;margin-bottom:10px;padding-left:var(--otherMessagePaddingLeft);}.other-message:before{content:"";display:var(--avatarDisplay);position:absolute;top:0;left:0;width:var(--avatarSize);height:var(--avatarSize);background-image:var(--avatarImageURL);background-size:cover;background-repeat:no-repeat;border-radius:var(--avatarShape);border:var(--avatarBorderThickness) solid var(--avatarBorderColor);}.other-message .message-text{background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:var(--messageTextSize);border-radius:var(--botMessageCornerStyle);word-wrap:break-word;font-family:var(--fontFamily);margin-bottom:5px;padding:10px 15px;border:var(--botMessageBorderThickness) solid var(--botMessageBorderColor);}.other-message .message-text *{color:var(--botMessageTextColor);}.my-message{padding-right:0;margin-bottom:10px;position:relative;}.my-message .message-text{background-color:var(--userMessageBg)!important;color:var(--userMessageTextColor);font-size:var(--messageTextSize);border-radius:var(--userMessageCornerStyle);word-wrap:break-word;font-family:var(--fontFamily);margin-bottom:5px;margin-top:5vh;padding:10px 15px;border:var(--userMessageBorderThickness) solid var(--userMessageBorderColor);}.my-message .message-text *{color:var(--userMessageTextColor)!important;}.message-text *{font-family:inherit;}.chat-input{height:var(--chatInputHeight);padding:20px;background:var(--chatInputBackground);display:flex;align-items:center;width:100%;box-sizing:border-box;border-top:0 solid #e0e0e0;font-family:var(--fontFamily);}.chat-input .input-group{flex:1;border-radius:var(--chatInputBorderRadius)!important;background-color:var(--chatInputTextFieldBg)!important;overflow:visible;position:relative;display:flex;padding:5px;}.chat-input input{width:100%;padding:10px;border:none;background-color:var(--chatInputTextFieldBg);color:var(--chatInputTextFieldTextColor);font-size:14px;outline:none;box-sizing:border-box;flex:1;}.chat-input .form-control{background:var(--chatInputTextFieldBg)!important;}button.btn.uploadBtt.bg-light-hover:hover{background:#ffffff42;filter:invert(0.7);}path#path2{fill:var(--iconsColorSend)!important;}.bg-light-hover:hover{background-color:unset!important;}.btn-outline-primary{color:var(--botMessageTextColor)!important;border-color:var(--primaryColor)!important;background-color:var(--botMessageBg);}.chat-ice-breaker .btn{position:relative;top:-20px!important;color:#000000;background-color:var(--botMessageBg);font-family:var(--fontFamily);font-size:var(--buttonTextSize);font-weight:var(--buttonFontWeight);padding:var(--buttonPadding);border-radius:20px;border:1px solid var(--primaryColor);cursor:pointer;box-shadow:0 4px 6px rgba(0,0,0,.1);margin:5px 0;transition:transform 0.2s ease,background-color 0.2s ease;}.chat-ice-breaker .btn:hover{background-color:var(--primaryColor);color:#fff;transform:scale(1.05);}.chat-input .btn.dropdown-toggle{position:relative;color:var(--botMessageTextColor);font-family:var(--fontFamily);font-size:16px;z-index:10000;cursor:pointer;border:none;border-radius:5px;}.chat-input .dropdown-menu{position:absolute;top:calc(100% - 10px);left:0;background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:16px;z-index:10000;pointer-events:auto;min-width:160px;border:0px solid var(--primaryColor);border-radius:5px;box-shadow:0 4px 6px rgba(0,0,0,.1);font-family:var(--fontFamily);}.chat-input .dropdown-menu .dropdown-item{background-color:var(--botMessageBg);color:var(--botMessageTextColor);font-size:16px;padding:10px;cursor:pointer;border-radius:3px;font-family:var(--fontFamily);}.chat-input .dropdown-menu .dropdown-item:hover{background-color:var(--primaryColor);color:#fff;}</style>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.20.0/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-ui@2.15.10/lib/index.js"></script>
    <script src="myjs.js?v=4"></script>
    <script src="main.js?v=5"></script>
    <script src="webchat.js?v=57"></script>

    <style>
         [v-cloak] {
            display: none !important;
        }
    </style>
</head>
<body>



    <main id="app" v-cloak>
        <div class="container-xxx">

            <div class="d-flex justify-content-center align-items-center chat-container" v-if="screen == 'load'">
                <div class="spinner-grow" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div v-else-if="screen == 'error'">
                <p>Error on setup...</p>
            </div>
            <div class="chat-container" v-else-if="screen == 'chat'">

                <div class="chat-header" v-if="config.headerTitle !== null && !hideHeader">
                    <p class="m-0 py-3">
                        <b>{{config.headerTitle}}</b>
                    </p>
                </div>
                <br>

                <div class="chat-area py-4 px-4" v-bind:class="[ hideHeader ? 'chat-area2' : '' ]">
                    <div v-for="(m, index) in activeChatMessages">

    <p v-if="devMode && (index >= activeChatMessages.length - 2) || devMode">{{ m }}</p>

<div>
        
    <div v-if="m.data.message">
        <div class="clearfix" v-for="m2 in m.data.message" v-bind:class="[ (!webchat && m2.dir == 0) || (webchat && m2.dir == 1) ? 'my-message  animate__animated animate__slideInRight' : 'other-message  animate__animated animate__slideInLeft']">
        <div class="clearfix">

        <div class="chat-avatar float-left mr-2 mt-2" v-if="webchat && m2.dir == 0 && showPersona && pageData.persona">
            <img v-bind:src="pageData.persona">
        </div>

        <div v-if="m2.action" class="my-0 px-4">
            <p class="text-center text-secondary my-0">
                {{ m2.action.text }}                                        
            </p>
            <p v-if="m2.action.url" class="text-center my-0">
                <a v-bind:href="m2.action.url" target="_blank">Learn more</a>
            </p>
        </div>

        <div class="message my-2" v-bind:title='moment(m.data.timestamp, "x").fromNow(true)'>
            

            <div v-if="m2.wa == 1">
                <div v-if="m2.type == 'text'" class="message-text">
                    <pre class="m-0" v-html="renderTextMessage(m2.text.body)"></pre>
                </div>

                <div v-else-if="m2.type == 'interactive'" class="message-attach message-attach-big">
                    <div class="flow flow-text">
                        <div class="div_flow_content">
                            <div class="my-0 pb-0 textarea_c div_text_c">
                                <pre class="m-0" v-html="renderTextMessage(m2.interactive.body.text)"></pre>
                            </div>
                            <div class="div_btts">
                                <p v-if="m2.interactive.type == 'button'" class="p_add_btt" data-index="0" data-pindex="0" v-for="b in m2.interactive.action.buttons" v-on:click="clickButton(b)">
                                    {{ b.reply.title }}
                                </p>
                                <p v-if="m2.interactive.type == 'list'" class="p_add_btt" data-index="0" data-pindex="0">
                                    {{ m2.interactive.action.button }}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-else-if="m2.type == 'document'" class="message-text">
                    <div class="d-flex align-items-center">
                        <i class="fal fa-file mr-3 hide"></i>
                        <a v-bind:href="m2.document.link" target="_BLANK">Download</a>
                    </div>
                </div>
                <div v-else-if="m2.type == 'image' || m2.type == 'video' || m2.type == 'audio' || m2.type == 'voice'" class="message-attach message-attach-big">
                    
                    <img v-if="m2.type == 'image'" v-bind:src="m2.image.link" class="message-attach-midia">

                    <video v-else-if="m2.type == 'video'" controls preload="metadata" class="message-attach-midia">
                        <source  v-bind:src="m2.video.link+'#t=0.1'">
                    </video>

                    <audio controls v-else-if="m2.type == 'audio' || m2.type == 'voice'">
                        <source v-bind:src="m2.audio.link">
                    </audio>                   
                    
                </div>
            </div> 
            
            

            <div v-else-if="m2.text === undefined && (m2.g == 1 || m2.messageId)">
                <div class="message-attach message-attach-big">
                    <img v-if="m2.image" v-bind:src="m2.image.contentInfo.fileUrl" class="message-attach-midia">

                    <div v-else-if="m2.richCard && m2.richCard.carouselCard">
                        <div :id="'carousel'+index" class="carousel slide" data-bs-ride="carousel" data-interval="false">
                            <div class="carousel-inner">
                                <div v-for="(e, idx) in m2.richCard.carouselCard.cardContents" :key="e" class="carousel-item" v-bind:class = "idx == 0 ?'active':''">
                                    <div class="div_c2 ">
                                        <div class="pt-0">
                                            <div class="img-box " v-bind:class = "'r_'+(m2.richCard.carouselCard.cardWidth == 'MEDIUM' ? 'horizontal' : 'square div_image')" v-if="e.media">
                                                <img v-bind:src="e.media.contentInfo.fileUrl" alt="" v-bind:class = "'r_'+(m2.richCard.carouselCard.cardWidth == 'MEDIUM' ? '' : 'div_image')">
                                            </div>
                                            <div class="py-1 px-2 bg-white">
                                                <p class="m-0" v-if="e.title">
                                                    <b>{{ e.title }}</b>
                                                </p>
                                                <p class="m-0" v-if="e.description">{{ e.description }}</p>
                                            </div>
                                        </div>

                                        <div class="div_btts" v-if="e.suggestions">
                                            <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in e.suggestions" v-on:click="clickButton(b)">
                                                {{b.action ? b.action.text :  b.reply.text}}
                                            </p>
                                        </div>
                                    </div>
                                </div>                            
                            </div>
                            <a class="carousel-control-prev" :href="'#carousel'+index" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" :href="'#carousel'+index" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>

                        <el-carousel indicator-position="none" height="400px" :autoplay="false" arrow="always">
                            <el-carousel-item v-for="e in m2.richCard.carouselCard.cardContents" :key="e">

                            <div class="div_c2 ">
                                <div class="pt-0">
                                    <div class="img-box " v-bind:class = "'r_'+(m2.richCard.carouselCard.cardWidth == 'MEDIUM' ? 'horizontal' : 'square div_image')" v-if="e.media">
                                        <img v-bind:src="e.media.contentInfo.fileUrl" alt="" v-bind:class = "'r_'+(m2.richCard.carouselCard.cardWidth == 'MEDIUM' ? '' : 'div_image')">
                                    </div>
                                    <div class="py-1 px-2 bg-white">
                                        <p class="m-0" v-if="e.title">
                                            <b>{{ e.title }}</b>
                                        </p>
                                        <p class="m-0" v-if="e.description">{{ e.description }}</p>
                                    </div>
                                </div>

                                <div class="div_btts" v-if="e.suggestions">
                                    <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in e.suggestions" v-on:click="clickButton(b)">
                                         {{b.action ? b.action.text :  b.reply.text}}
                                    </p>
                                </div>
                            </div>

                            </el-carousel-item>
                        </el-carousel>

                    </div>
                    <div v-else-if="m2.richCard && m2.richCard.standaloneCard">
                            
                            <div class="flow flow-text" v-if="!m2.richCard.standaloneCard.cardContent.title">
                                <div class="div_flow_content">
                                    <div class="my-0 pb-0 textarea_c div_text_c">
                                        <pre class="m-0">{{ m2.richCard.standaloneCard.cardContent.description }}</pre>
                                    </div>
                                    
                                    <div class="div_btts" v-if="m2.richCard.standaloneCard.cardContent.suggestions">
                                        <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in m2.richCard.standaloneCard.cardContent.suggestions" v-on:click="clickButton(b)">
                                            {{b.action ? b.action.text :  b.reply.text}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div v-else class="div_c2 " v-for="e in [m2.richCard.standaloneCard.cardContent]">
                                <div class="pt-0">
                                    <div class="img-box r_horizontal" v-if="e.media">
                                        <img v-bind:src="e.media.contentInfo.fileUrl" alt="">
                                    </div>
                                    <div class="py-1 px-2 bg-white">
                                        <p class="m-0" v-if="e.title">
                                            <b>{{ e.title }}</b>
                                        </p>
                                        <p class="m-0" v-if="e.description">{{ e.description }}</p>
                                    </div>
                                </div>

                                <div class="div_btts" v-if="e.suggestions">
                                    <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in e.suggestions" v-on:click="clickButton(b)">
                                        {{b.action ? b.action.text :  b.reply.text}}
                                    </p>
                                </div>
                            </div>

                    </div>
                </div>
                
            </div>


            <div v-else-if="m2.text" class="message-text">
                <pre v-if="m2.text.includes('html')" class="m-0">{{m2.text}}</pre>
                <pre v-else class="m-0" v-html="renderTextMessage(m2.text)"></pre>
            </div>

           
            <div v-else-if="m2.attachment" class="message-attach message-attach-big">
                <div class="flow flow-text" v-if="m2.attachment.type == 'template' && m2.attachment.payload.template_type == 'button'">
                    <div class="div_flow_content">
                        <div class="my-0 pb-0 textarea_c div_text_c">
                            <pre class="m-0" v-html="renderTextMessage(m2.attachment.payload.text)"></pre>

                        </div>
                        <div class="div_btts">
                            <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in m2.attachment.payload.buttons" v-on:click="clickButton(b)">
                                {{ b.title }}
                            </p>
                        </div>
                    </div>
                </div>

                <img v-if="m2.attachment.type == 'image' || m2.attachment.type == 'image-gif'" v-bind:src="m2.attachment.payload.url" class="message-attach-midia"/>

                <video v-else-if="m2.attachment.type == 'video'" controls preload="metadata" class="message-attach-midia">
                    <source v-if="m2.attachment.payload.url" v-bind:src="m2.attachment.payload.url+'#t=0.1'">
                    <source v-else v-bind:src="appDomain+'r.php?p='+pageId+'&att='+m2.attachment.payload.attachment_id+'&u='+(user ? user.id+'&h='+user.hash :  activeChatInfo.ms_id+'&h='+activeChatInfo.hash)">
                </video>

                <audio controls :autoplay="m2.attachment.payload.autoplay" v-else-if="m2.attachment.type == 'audio'">
                    <source v-if="m2.attachment.payload.url" v-bind:src="m2.attachment.payload.url">
                    <source v-else v-bind:src="appDomain+'r.php?p='+pageId+'&att='+m2.attachment.payload.attachment_id+'&u='+(user ? user.id+'&h='+user.hash :  activeChatInfo.ms_id+'&h='+activeChatInfo.hash)">
                </audio>
                
                <div v-else-if="m2.attachment.type == 'file'" class="message-text">
                    <a v-if="m2.attachment.payload.url" v-bind:href="m2.attachment.payload.url" target="_BLANK">Download</a>
                    <a v-else v-bind:href="appDomain+'r.php?p='+pageId+'&att='+m2.attachment.payload.attachment_id+'&u='+(user ? user.id+'&h='+user.hash :  activeChatInfo.ms_id+'&h='+activeChatInfo.hash)" target="_BLANK">Download</a>
                </div>


                <div v-if="m2.attachment.type == 'template' && m2.attachment.payload.template_type == 'generic'">
                    <div :id="'carousel'+index" class="carousel slide" data-bs-ride="carousel" data-interval="false">
                        <div class="carousel-inner">
                            <div v-for="(e, idx) in m2.attachment.payload.elements" :key="e" class="carousel-item" v-bind:class = "idx == 0 ?'active':''">
                                <div class="div_c2 ">
                                    <div class="pt-0">
                                        <div class="img-box div_image" v-bind:class = "'r_'+m2.attachment.payload.image_aspect_ratio" v-if="e.image_url">
                                            <img v-bind:src="e.image_url" alt="" v-bind:class = "m2.attachment.payload.image_aspect_ratio == 'square' ? 'div_image' : ''">
                                        </div>
                                        <div class="py-1 px-2 bg-white">
                                            <p class="m-0">
                                                <b>{{ e.title }}</b>
                                            </p>
                                            <pre class="m-0">{{ e.subtitle }}</pre>
                                        </div>
                                    </div>

                                    <div class="div_btts" v-if="e.buttons">
                                        <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in e.buttons" v-on:click="clickButton(b)">
                                            {{ b.title }}
                                        </p>
                                    </div>
                                </div>

                            </div>                            
                        </div>
                        <a v-if="m2.attachment.payload.elements.length > 1" class="carousel-control-prev" :href="'#carousel'+index" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a v-if="m2.attachment.payload.elements.length > 1" class="carousel-control-next" :href="'#carousel'+index" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>

                <div v-if="m2.attachment.type == 'template' && m2.attachment.payload.template_type == 'media'">
                    
                    <div v-for="e in m2.attachment.payload.elements">
                    <div class="div_c2 ">
                        <div class="pt-0">
                            <div class="img-box" v-if="e.media_type == 'image'">
                                <img height="auto" height="auto" v-if="e.url" v-bind:src="e.url" alt="">
                                <img v-else v-bind:src="appDomain+'r.php?p='+pageId+'&att='+e.attachment_id+'&u='+(user ? user.id+'&h='+user.hash :  activeChatInfo.ms_id+'&h='+activeChatInfo.hash)" alt="">
                            </div>
                            <div v-if="e.media_type == 'video'">
                                <video controls preload="metadata">
                                    <source v-if="e.url" v-bind:src="e.url+'#t=0.1'">
                                    <source v-else v-bind:src="appDomain+'r.php?p='+pageId+'&att='+e.attachment_id+'&u='+(user ? user.id+'&h='+user.hash :  activeChatInfo.ms_id+'&h='+activeChatInfo.hash)">
                                </video>
                            </div>
                        </div>

                        <div class="div_btts" v-if="e.buttons">
                            <p class="p_add_btt" data-index="0" data-pindex="0" v-for="b in e.buttons" v-on:click="clickButton(b)">
                                {{ b.title }}
                            </p>
                        </div>
                    </div>

                </div>
                </div>

            </div>

            <i v-if="!webchat" v-bind:class="[getChannelById(m2.channel).icon]" v-bind:style="{ color: getChannelById(m2.channel).color}"></i>

        </div>

        </div>

        <div v-if="webchat && m2.quick_replies && (index == activeChatMessages.length - 1 || (index == activeChatMessages.length - 2) && activeChatMessages[activeChatMessages.length - 1].data.message[0].type == 'typing')" class="mt-3 clearfix text-center">
            <button type="button" class="btn btn-outline-primary pill m-1 quick-reply" v-for="q in m2.quick_replies" v-if="q.content_type=='text'" v-on:click="clickReply(q)">{{q.title}}</button>
        </div>

        <!--<div v-if="m2.type == 'typing' && index == activeChatMessages.length - 1">
            <div class="animate__animated animate__slideInLeft">
                <img src="https://kirszenberg.com/4036e7066ee11fb6c17c74933b190b7d/typing-indicator.gif" height="32px">
            </div>
        </div>-->

        </div>
    </div>                    

</div>
</div>

<div class="message-delay">
    <div class="animate__animated animate__slideInLeft">
        <img src="../assets/typing.gif" height="48px">
    </div>
</div>                </div>

                <div class="chat-input d-flex align-items-center" v-if="webchat && !hideComposer" :class=" pageData.powered ? 'flex-wrap powered' : ''">

                    <div class="d-flex align-items-center w-100 pr-3" v-if="sendType=='file'">
                        <div class="d-flex align-items-center pl-4 pr-2">
                            <div v-if="fileType == 'image'">
                                <img :src="fileUrl" height="auto" width="auto" style="max-width: 150px; max-height: 150px;"/>
                            </div>
                            <div v-else-if="fileType == 'audio' || fileType == 'voice'">
                                <audio controls>
                                    <source v-bind:src="fileUrl">
                                </audio> 
                            </div>
                            <video height="150" width="auto" v-else-if="fileUrl && fileType == 'video'" controls preload="metadata">
                                 <source  :src="fileUrl+'#t=0.1'">
                            </video>
                            <span v-else>{{files[0].name}}</span>
                            <div class="ml-3 cursor_pointer bg-light-hover px-3 py-2" v-on:click="enableSendText()" style="cursor: pointer ;">
                                <svg height="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path style="fill:var(--primaryColor);fill-opacity:1;" d="M315.3 411.3c-6.253 6.253-16.37 6.253-22.63 0L160 278.6l-132.7 132.7c-6.253 6.253-16.37 6.253-22.63 0c-6.253-6.253-6.253-16.37 0-22.63L137.4 256L4.69 123.3c-6.253-6.253-6.253-16.37 0-22.63c6.253-6.253 16.37-6.253 22.63 0L160 233.4l132.7-132.7c6.253-6.253 16.37-6.253 22.63 0c6.253 6.253 6.253 16.37 0 22.63L182.6 256l132.7 132.7C321.6 394.9 321.6 405.1 315.3 411.3z"/></svg>
                            </div>
                        </div>
                        <button class="btn  animate__animated animate__slideInLeft animate__faster" type="button" v-on:click="sendMessage()">
                            <svg height="24px"
                                            xmlns:dc="http://purl.org/dc/elements/1.1/"
                                            xmlns:cc="http://creativecommons.org/ns#"
                                            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                            xmlns:svg="http://www.w3.org/2000/svg"
                                            xmlns="http://www.w3.org/2000/svg"
                                            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                                            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                                            version="1.1"
                                            id="Capa_1"
                                            x="0px"
                                            y="0px"
                                            viewBox="0 0 448.011 448.011"
                                            style="enable-background:new 0 0 448.011 448.011;"
                                            xml:space="preserve"
                                            sodipodi:docname="right-arrow.svg"
                                            inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"><metadata
                                            id="metadata43"><rdf:RDF><cc:Work
                                                rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                                                    rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
                                            id="defs41" /><sodipodi:namedview
                                            pagecolor="#ffffff"
                                            bordercolor="#666666"
                                            borderopacity="1"
                                            objecttolerance="10"
                                            gridtolerance="10"
                                            guidetolerance="10"
                                            inkscape:pageopacity="0"
                                            inkscape:pageshadow="2"
                                            inkscape:window-width="1920"
                                            inkscape:window-height="1001"
                                            id="namedview39"
                                            showgrid="false"
                                            inkscape:zoom="0.92631657"
                                            inkscape:cx="301.61443"
                                            inkscape:cy="294.97441"
                                            inkscape:window-x="-9"
                                            inkscape:window-y="-9"
                                            inkscape:window-maximized="1"
                                            inkscape:current-layer="Capa_1" />
                                            <g
                                            id="g6"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                <g
                                            id="g4"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                    <path
                                            d="M438.731,209.463l-416-192c-6.624-3.008-14.528-1.216-19.136,4.48c-4.64,5.696-4.8,13.792-0.384,19.648l136.8,182.4    l-136.8,182.4c-4.416,5.856-4.256,13.984,0.352,19.648c3.104,3.872,7.744,5.952,12.448,5.952c2.272,0,4.544-0.48,6.688-1.472    l416-192c5.696-2.624,9.312-8.288,9.312-14.528S444.395,212.087,438.731,209.463z"
                                            id="path2"
                                            style="fill:var(--primaryColor);fill-opacity:1" />
                                                </g>
                                            </g>
                                            <g
                                            id="g8">
                                            </g>
                                            <g
                                            id="g10">
                                            </g>
                                            <g
                                            id="g12">
                                            </g>
                                            <g
                                            id="g14">
                                            </g>
                                            <g
                                            id="g16">
                                            </g>
                                            <g
                                            id="g18">
                                            </g>
                                            <g
                                            id="g20">
                                            </g>
                                            <g
                                            id="g22">
                                            </g>
                                            <g
                                            id="g24">
                                            </g>
                                            <g
                                            id="g26">
                                            </g>
                                            <g
                                            id="g28">
                                            </g>
                                            <g
                                            id="g30">
                                            </g>
                                            <g
                                            id="g32">
                                            </g>
                                            <g
                                            id="g34">
                                            </g>
                                            <g
                                            id="g36">
                                            </g>
                                        </svg> 
                        </button>
                    </div>
                    <div v-else-if="recording" class="d-flex align-items-center justify-content-between w-100 px-3">                        
                        <button  class="btn uploadBtt bg-light-hover" style="padding: 4px;" @click="cancelRecording()">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 384 512"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc.--><path style="fill:var(--primaryColor);fill-opacity:1;" d="M324.5 411.1c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6L214.6 256 347.1 123.5c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L192 233.4 59.5 100.9c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6L169.4 256 36.9 388.5c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L192 278.6 324.5 411.1z"/></svg>
                        </button>

                        <div class="spinner-grow text-secondary" role="status">
                            <span v-t="'processing'" class="sr-only"></span>
                        </div>

                        <button class="btn uploadBtt bg-light-hover" style="padding: 4px;" v-on:click="finishRecording()">
                            <svg height="24px"
                                            xmlns:dc="http://purl.org/dc/elements/1.1/"
                                            xmlns:cc="http://creativecommons.org/ns#"
                                            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                            xmlns:svg="http://www.w3.org/2000/svg"
                                            xmlns="http://www.w3.org/2000/svg"
                                            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                                            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                                            version="1.1"
                                            id="Capa_1"
                                            x="0px"
                                            y="0px"
                                            viewBox="0 0 448.011 448.011"
                                            style="enable-background:new 0 0 448.011 448.011;"
                                            xml:space="preserve"
                                            sodipodi:docname="right-arrow.svg"
                                            inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"><metadata
                                            id="metadata43"><rdf:RDF><cc:Work
                                                rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                                                    rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
                                            id="defs41" /><sodipodi:namedview
                                            pagecolor="#ffffff"
                                            bordercolor="#666666"
                                            borderopacity="1"
                                            objecttolerance="10"
                                            gridtolerance="10"
                                            guidetolerance="10"
                                            inkscape:pageopacity="0"
                                            inkscape:pageshadow="2"
                                            inkscape:window-width="1920"
                                            inkscape:window-height="1001"
                                            id="namedview39"
                                            showgrid="false"
                                            inkscape:zoom="0.92631657"
                                            inkscape:cx="301.61443"
                                            inkscape:cy="294.97441"
                                            inkscape:window-x="-9"
                                            inkscape:window-y="-9"
                                            inkscape:window-maximized="1"
                                            inkscape:current-layer="Capa_1" />
                                            <g
                                            id="g6"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                <g
                                            id="g4"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                    <path
                                            d="M438.731,209.463l-416-192c-6.624-3.008-14.528-1.216-19.136,4.48c-4.64,5.696-4.8,13.792-0.384,19.648l136.8,182.4    l-136.8,182.4c-4.416,5.856-4.256,13.984,0.352,19.648c3.104,3.872,7.744,5.952,12.448,5.952c2.272,0,4.544-0.48,6.688-1.472    l416-192c5.696-2.624,9.312-8.288,9.312-14.528S444.395,212.087,438.731,209.463z"
                                            id="path2"
                                            style="fill:var(--primaryColor);fill-opacity:1" />
                                                </g>
                                            </g>
                                            <g
                                            id="g8">
                                            </g>
                                            <g
                                            id="g10">
                                            </g>
                                            <g
                                            id="g12">
                                            </g>
                                            <g
                                            id="g14">
                                            </g>
                                            <g
                                            id="g16">
                                            </g>
                                            <g
                                            id="g18">
                                            </g>
                                            <g
                                            id="g20">
                                            </g>
                                            <g
                                            id="g22">
                                            </g>
                                            <g
                                            id="g24">
                                            </g>
                                            <g
                                            id="g26">
                                            </g>
                                            <g
                                            id="g28">
                                            </g>
                                            <g
                                            id="g30">
                                            </g>
                                            <g
                                            id="g32">
                                            </g>
                                            <g
                                            id="g34">
                                            </g>
                                            <g
                                            id="g36">
                                            </g>
                                        </svg> 
                        </button>
                    </div>
                    <div v-else class="d-flex align-items-center w-100"> 
                        <div v-if="allowSendFile && !message.length">
                            <el-upload v-if="!sendingFile"
                                ref="uploadFile"
                                show-file-list="false"
                                :file-list="fileList"
                                :on-change="fileChanged"
                                http-request="sendFile"
                                :auto-upload="false">
                                <div slot="file"></div>
                                <div slot="trigger">                                                
                                    <button class="btn uploadBtt bg-light-hover">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 448 512"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc.--><path style="fill:var(--primaryColor);fill-opacity:1;" d="M380.7 67.3c-29.1-29.1-76.3-29.1-105.4 0l-192 192c-46.8 46.8-46.8 122.6 0 169.4s122.6 46.8 169.4 0l152-152c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6l-152 152c-59.3 59.3-155.4 59.3-214.6 0S1.4 296 60.7 236.7l192-192c41.6-41.6 109-41.6 150.6 0s41.6 109 0 150.6L219.5 379.1c-28.2 28.2-74.6 25.6-99.6-5.5c-21.3-26.6-19.2-65 4.9-89.1L276.7 132.7c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6L147.5 307.1c-12.6 12.6-13.7 32.6-2.6 46.5c13 16.2 37.2 17.6 51.9 2.9L380.7 172.7c29.1-29.1 29.1-76.3 0-105.4z"/></svg>
                                    </button>
                                </div>
                            </el-upload>
                            <div v-else class="spinner-grow mr-2" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>  
                        
                        <button v-if="allowRecordAudio && !sendingFile && !message.length" class="btn uploadBtt mr-1 bg-light-hover" style="padding: 4px;" @click="preSendAuido()">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 384 512"><!--!Font Awesome Pro 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc.--><path style="fill:var(--primaryColor);fill-opacity:1;" d="M256 96V256c0 35.3-28.7 64-64 64s-64-28.7-64-64V96c0-35.3 28.7-64 64-64s64 28.7 64 64zM96 96V256c0 53 43 96 96 96s96-43 96-96V96c0-53-43-96-96-96S96 43 96 96zM64 208c0-8.8-7.2-16-16-16s-16 7.2-16 16v48c0 83 63.1 151.2 144 159.2V480H112c-8.8 0-16 7.2-16 16s7.2 16 16 16h80 80c8.8 0 16-7.2 16-16s-7.2-16-16-16H208V415.2c80.9-8 144-76.2 144-159.2V208c0-8.8-7.2-16-16-16s-16 7.2-16 16v48c0 70.7-57.3 128-128 128s-128-57.3-128-128V208z"/></svg>
                        </button>
                    
                        <div class="composerC w-100">
                            <div class="input-group">
                                <textarea v-if="isMobile" id="composer" class="form-control" rows="1" v-model="message" oninput="inputChanged(this)" ></textarea>
                                <textarea v-else id="composer" class="form-control" rows="1" v-model="message" v-on:keyup.enter="sendMessage();" oninput="inputChanged(this)" ></textarea>
                                
                                <div class="input-group-append">
                                    <button class="btn  animate__animated animate__slideInLeft animate__faster" type="button" v-on:click="sendMessage()" v-if="message">
                                        <svg height="24px"
                                            xmlns:dc="http://purl.org/dc/elements/1.1/"
                                            xmlns:cc="http://creativecommons.org/ns#"
                                            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                            xmlns:svg="http://www.w3.org/2000/svg"
                                            xmlns="http://www.w3.org/2000/svg"
                                            xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                                            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                                            version="1.1"
                                            id="Capa_1"
                                            x="0px"
                                            y="0px"
                                            viewBox="0 0 448.011 448.011"
                                            style="enable-background:new 0 0 448.011 448.011;"
                                            xml:space="preserve"
                                            sodipodi:docname="right-arrow.svg"
                                            inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"><metadata
                                            id="metadata43"><rdf:RDF><cc:Work
                                                rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                                                    rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
                                            id="defs41" /><sodipodi:namedview
                                            pagecolor="#ffffff"
                                            bordercolor="#666666"
                                            borderopacity="1"
                                            objecttolerance="10"
                                            gridtolerance="10"
                                            guidetolerance="10"
                                            inkscape:pageopacity="0"
                                            inkscape:pageshadow="2"
                                            inkscape:window-width="1920"
                                            inkscape:window-height="1001"
                                            id="namedview39"
                                            showgrid="false"
                                            inkscape:zoom="0.92631657"
                                            inkscape:cx="301.61443"
                                            inkscape:cy="294.97441"
                                            inkscape:window-x="-9"
                                            inkscape:window-y="-9"
                                            inkscape:window-maximized="1"
                                            inkscape:current-layer="Capa_1" />
                                            <g
                                            id="g6"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                <g
                                            id="g4"
                                            style="fill:var(--primaryColor);fill-opacity:1">
                                                    <path
                                            d="M438.731,209.463l-416-192c-6.624-3.008-14.528-1.216-19.136,4.48c-4.64,5.696-4.8,13.792-0.384,19.648l136.8,182.4    l-136.8,182.4c-4.416,5.856-4.256,13.984,0.352,19.648c3.104,3.872,7.744,5.952,12.448,5.952c2.272,0,4.544-0.48,6.688-1.472    l416-192c5.696-2.624,9.312-8.288,9.312-14.528S444.395,212.087,438.731,209.463z"
                                            id="path2"
                                            style="fill:var(--primaryColor);fill-opacity:1" />
                                                </g>
                                            </g>
                                            <g
                                            id="g8">
                                            </g>
                                            <g
                                            id="g10">
                                            </g>
                                            <g
                                            id="g12">
                                            </g>
                                            <g
                                            id="g14">
                                            </g>
                                            <g
                                            id="g16">
                                            </g>
                                            <g
                                            id="g18">
                                            </g>
                                            <g
                                            id="g20">
                                            </g>
                                            <g
                                            id="g22">
                                            </g>
                                            <g
                                            id="g24">
                                            </g>
                                            <g
                                            id="g26">
                                            </g>
                                            <g
                                            id="g28">
                                            </g>
                                            <g
                                            id="g30">
                                            </g>
                                            <g
                                            id="g32">
                                            </g>
                                            <g
                                            id="g34">
                                            </g>
                                            <g
                                            id="g36">
                                            </g>
                                        </svg> 
                                    </button>

                                    <div class="dropdown dropup" v-if="pageMenu">
                                    <button class="btn dropdown-toggle animate__animated animate__slideInUp animate__faster" data-toggle="dropdown" type="button" v-if="!message">
                                    <svg height="24px"
                                        xmlns:dc="http://purl.org/dc/elements/1.1/"
                                        xmlns:cc="http://creativecommons.org/ns#"
                                        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                                        xmlns:svg="http://www.w3.org/2000/svg"
                                        xmlns="http://www.w3.org/2000/svg"
                                        xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                                        xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                                        version="1.1"
                                        id="Capa_1"
                                        x="0px"
                                        y="0px"
                                        viewBox="0 0 512 512"
                                        style="enable-background:new 0 0 512 512;"
                                        xml:space="preserve"
                                        sodipodi:docname="menu.svg"
                                        inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"><metadata
                                        id="metadata43"><rdf:RDF><cc:Work
                                            rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                                                rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
                                        id="defs41" /><sodipodi:namedview
                                        pagecolor="#ffffff"
                                        bordercolor="#666666"
                                        borderopacity="1"
                                        objecttolerance="10"
                                        gridtolerance="10"
                                        guidetolerance="10"
                                        inkscape:pageopacity="0"
                                        inkscape:pageshadow="2"
                                        inkscape:window-width="1920"
                                        inkscape:window-height="1001"
                                        id="namedview39"
                                        showgrid="false"
                                        inkscape:zoom="1.6210938"
                                        inkscape:cx="256"
                                        inkscape:cy="256"
                                        inkscape:window-x="-9"
                                        inkscape:window-y="-9"
                                        inkscape:window-maximized="1"
                                        inkscape:current-layer="Capa_1"
                                        inkscape:document-rotation="0" />
                                        <g
                                        id="g6"
                                        style="fill: var(--primaryColor);fill-opacity:1">
                                            <g
                                        id="g4"
                                        style="fill: var(--primaryColor);fill-opacity:1">
                                                <path
                                        d="M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M362.667,362.667H149.333    c-11.797,0-21.333-9.557-21.333-21.333c0-11.776,9.536-21.333,21.333-21.333h213.333c11.797,0,21.333,9.557,21.333,21.333    C384,353.109,374.464,362.667,362.667,362.667z M362.667,277.333H149.333C137.536,277.333,128,267.776,128,256    s9.536-21.333,21.333-21.333h213.333c11.797,0,21.333,9.557,21.333,21.333S374.464,277.333,362.667,277.333z M362.667,192H149.333    C137.536,192,128,182.443,128,170.667s9.536-21.333,21.333-21.333h213.333c11.797,0,21.333,9.557,21.333,21.333    S374.464,192,362.667,192z"
                                        id="path2"
                                        style="fill: var(--primaryColor);fill-opacity:1" />
                                            </g>
                                        </g>
                                        <g
                                        id="g8">
                                        </g>
                                        <g
                                        id="g10">
                                        </g>
                                        <g
                                        id="g12">
                                        </g>
                                        <g
                                        id="g14">
                                        </g>
                                        <g
                                        id="g16">
                                        </g>
                                        <g
                                        id="g18">
                                        </g>
                                        <g
                                        id="g20">
                                        </g>
                                        <g
                                        id="g22">
                                        </g>
                                        <g
                                        id="g24">
                                        </g>
                                        <g
                                        id="g26">
                                        </g>
                                        <g
                                        id="g28">
                                        </g>
                                        <g
                                        id="g30">
                                        </g>
                                        <g
                                        id="g32">
                                        </g>
                                        <g
                                        id="g34">
                                        </g>
                                        <g
                                        id="g36">
                                        </g>
                                        </svg>
                                    </button>

                                    <div class="dropdown-menu">
                                        <a class="dropdown-item py-2" href="#" v-for="m in pageMenu.call_to_actions" v-on:click="clickMenu(m)">
                                            {{ m.title }}
                                        </a>
                                    </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        

                    </div>
                    <a v-if="pageData.powered" class="w-100 text-center text-secondary" style="font-size: 11px; padding-bottom: 2px;" :href="pageData.powered.link" target="_blank">Powered by {{pageData.powered.name}}</a>

                </div>

                
               


                <div class="chat-ice-breaker text-right" v-if="showIceBreak && pageData.ice_breakers">
                    <div v-for="ice in pageData.ice_breakers">
                        <button class="btn btn-light bg-white shadow-sm pill my-2" v-on:click="clickIceBreak(ice)">
                            {{ ice.question }}
                        </button>
                    </div>

                </div>

            </div>

        </div>
    </main>
    
</body>
</html>